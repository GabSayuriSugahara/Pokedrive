<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Velha Pok√©mon - PokeDrive</title>
    <style>
        :root {
            --primary: #FF0000;
            --secondary: #3B4CCA;
            --accent: #FFDE00;
            --light: #FFFFFF;
            --dark: #2C2C2C;
            --grass: #78C850;
            --water: #6890F0;
            --fire: #F08030;
            --electric: #F8D030;
            --psychic: #F85888;
            --ice: #98D8D8;
            --fighting: #C03028;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 900px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
        }
        
        .pokeball-decoration {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle at 50% 50%, var(--light) 40%, var(--dark) 40%, var(--dark) 45%, transparent 45%),
                        linear-gradient(to bottom, var(--primary) 0%, var(--primary) 47%, var(--dark) 47%, var(--dark) 53%, var(--light) 53%, var(--light) 100%);
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            z-index: 1;
        }
        
        .pokeball-1 {
            top: -50px;
            right: -50px;
        }
        
        .pokeball-2 {
            bottom: -50px;
            left: -50px;
        }
        
        header {
            background-color: var(--primary);
            color: var(--light);
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 2;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .logo h1 {
            font-size: 2.2rem;
            text-shadow: 2px 2px 0 var(--secondary);
            letter-spacing: 2px;
        }
        
        .logo img {
            height: 50px;
        }
        
        .game-container {
            display: flex;
            flex-direction: column;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            border-radius: 10px;
            color: white;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .player-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--dark);
            font-size: 1.5rem;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        }
        
        .player-human {
            background: radial-gradient(circle at 30% 30%, var(--fire), var(--primary));
        }
        
        .player-ai {
            background: radial-gradient(circle at 30% 30%, var(--water), var(--secondary));
        }
        
        .player-details {
            display: flex;
            flex-direction: column;
        }
        
        .player-name {
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .player-symbol {
            font-size: 1.8rem;
            margin-top: 5px;
        }
        
        .game-status {
            text-align: center;
            padding: 12px 25px;
            background-color: var(--accent);
            color: var(--dark);
            border-radius: 25px;
            font-weight: bold;
            font-size: 1.1rem;
            min-width: 220px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        }
        
        .game-board-container {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .board-section {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .board-title {
            text-align: center;
            margin-bottom: 15px;
            font-weight: bold;
            color: var(--secondary);
            font-size: 1.3rem;
        }
        
        .tic-tac-toe-board {
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            background-color: var(--dark);
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .board-cell {
            background-color: var(--light);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .board-cell:hover {
            transform: scale(1.03);
            box-shadow: 0 0 10px rgba(255, 222, 0, 0.5);
        }
        
        .cell-x::before {
            content: "‚ùå";
            font-size: 3.5rem;
        }
        
        .cell-o::before {
            content: "‚≠ï";
            font-size: 3.5rem;
        }
        
        .cell-winner {
            animation: pulse 1s infinite;
            background-color: rgba(255, 222, 0, 0.3);
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            background-color: var(--primary);
            color: var(--light);
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn:hover {
            background-color: var(--secondary);
            transform: translateY(-2px);
        }
        
        .btn-reset {
            background-color: var(--electric);
            color: var(--dark);
        }
        
        .btn-back {
            background-color: var(--psychic);
        }
        
        .btn-difficulty {
            background-color: var(--grass);
        }
        
        .game-info {
            background-color: #f5f5f5;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            width: 100%;
        }
        
        .info-title {
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2rem;
        }
        
        .info-content {
            line-height: 1.6;
        }
        
        .pokemon-display {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            gap: 15px;
        }
        
        .pokemon-card {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background: linear-gradient(to bottom, #f8f8f8, #e8e8e8);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
            width: 48%;
            transition: transform 0.3s;
        }
        
        .pokemon-card:hover {
            transform: translateY(-5px);
        }
        
        .pokemon-name {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 1.1rem;
        }
        
        .pokemon-type {
            font-size: 0.9rem;
            padding: 4px 10px;
            border-radius: 15px;
            color: white;
            display: inline-block;
            margin-bottom: 10px;
        }
        
        .type-fire {
            background-color: var(--fire);
        }
        
        .type-water {
            background-color: var(--water);
        }
        
        .pokemon-image {
            font-size: 3.5rem;
            margin: 10px 0;
            filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.2));
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--secondary);
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }
        
        .moves-list {
            margin-top: 15px;
            max-height: 120px;
            overflow-y: auto;
            padding: 8px;
            background-color: white;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        .move-item {
            padding: 6px;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
        }
        
        .move-item:last-child {
            border-bottom: none;
        }
        
        .difficulty-selector {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }
        
        .diff-btn {
            padding: 8px 15px;
            background-color: #ddd;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .diff-btn.active {
            background-color: var(--grass);
            color: white;
        }
        
        @media (max-width: 768px) {
            .game-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .game-board-container {
                flex-direction: column;
            }
            
            .board-section {
                min-width: 100%;
            }
            
            .pokemon-display {
                flex-direction: column;
                align-items: center;
            }
            
            .pokemon-card {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="pokeball-decoration pokeball-1"></div>
        <div class="pokeball-decoration pokeball-2"></div>
        
        <header>
            <div class="logo">
                <h1>Jogo da Velha Pok√©mon</h1>
                <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBmaWxsPSIjZmZmZmZmIiBkPSJNMjU2IDI1Nk0xMjggMzUyTDEyOCAxNjBMMzg0IDE2ME0zODQgMzUyTDI1NiAyNTZaIi8+PHBhdGggZmlsbD0iI2ZmZmZmZiIgZD0iTTI1NiA0NDhDMzU4LjUgNDQ4IDQ0OCAzNTguNSA0NDggMjU2UzM1OC41IDY0IDI1NiA2NFM2NCAxNTMuNSA2NCAyNTZTNTEzLjUgNDQ4IDI1NiA0NDhaIiBzdHJva2U9IiNmZmZmZmYiIHN0cm9rZS13aWR0aD0iMTYiLz48L3N2Zz4=" alt="Pokeball">
            </div>
        </header>
        
        <div class="game-container">
            <div class="game-header">
                <div class="player-info">
                    <div class="player-avatar player-human">T</div>
                    <div class="player-details">
                        <div class="player-name">Treinador</div>
                        <div class="player-symbol">‚ùå</div>
                    </div>
                </div>
                
                <div class="game-status" id="game-status">
                    Sua vez de jogar!
                </div>
                
                <div class="player-info">
                    <div class="player-details" style="text-align: right;">
                        <div class="player-name">Prof. Carvalho</div>
                        <div class="player-symbol">‚≠ï</div>
                    </div>
                    <div class="player-avatar player-ai">P</div>
                </div>
            </div>
            
            <div class="game-board-container">
                <div class="board-section">
                    <div class="board-title">Batalha Pok√©mon</div>
                    <div class="tic-tac-toe-board" id="game-board">
                        <!-- Tabuleiro ser√° gerado por JavaScript -->
                    </div>
                    
                    <div class="difficulty-selector">
                        <div class="diff-btn active" data-diff="easy" onclick="setDifficulty('easy')">F√°cil</div>
                        <div class="diff-btn" data-diff="medium" onclick="setDifficulty('medium')">M√©dio</div>
                        <div class="diff-btn" data-diff="hard" onclick="setDifficulty('hard')">Dif√≠cil</div>
                    </div>
                    
                    <div class="controls">
                        <button class="btn btn-reset" onclick="resetGame()">Novo Jogo</button>
                        <button class="btn btn-back" onclick="goBackToDrive()">Voltar ao PokeDrive</button>
                    </div>
                </div>
                
                <div class="board-section">
                    <div class="board-title">Informa√ß√µes da Batalha</div>
                    <div class="game-info">
                        <div class="info-title">Regras do Jogo</div>
                        <div class="info-content">
                            <p>‚Ä¢ Voc√™ √© o ‚ùå (Charmander) e joga contra o Prof. Carvalho ‚≠ï (Squirtle)</p>
                            <p>‚Ä¢ Clique em uma c√©lula vazia para fazer sua jogada</p>
                            <p>‚Ä¢ Objetivo: formar uma linha de tr√™s s√≠mbolos (horizontal, vertical ou diagonal)</p>
                            <p>‚Ä¢ O primeiro a conseguir vence a batalha!</p>
                        </div>
                        
                        <div class="pokemon-display">
                            <div class="pokemon-card">
                                <div class="pokemon-name">Charmander</div>
                                <div class="pokemon-type type-fire">Tipo Fogo</div>
                                <div class="pokemon-image">üî•</div>
                                <div class="stats">
                                    <div class="stat">
                                        <div class="stat-value" id="player-wins">0</div>
                                        <div class="stat-label">Vit√≥rias</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="player-losses">0</div>
                                        <div class="stat-label">Derrotas</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="player-draws">0</div>
                                        <div class="stat-label">Empates</div>
                                    </div>
                                </div>
                                <div class="moves-list" id="player-moves">
                                    <div class="move-item">Hist√≥rico de jogadas:</div>
                                </div>
                            </div>
                            
                            <div class="pokemon-card">
                                <div class="pokemon-name">Squirtle</div>
                                <div class="pokemon-type type-water">Tipo √Ågua</div>
                                <div class="pokemon-image">üíß</div>
                                <div class="stats">
                                    <div class="stat">
                                        <div class="stat-value" id="ai-wins">0</div>
                                        <div class="stat-label">Vit√≥rias</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="ai-losses">0</div>
                                        <div class="stat-label">Derrotas</div>
                                    </div>
                                    <div class="stat">
                                        <div class="stat-value" id="ai-draws">0</div>
                                        <div class="stat-label">Empates</div>
                                    </div>
                                </div>
                                <div class="moves-list" id="ai-moves">
                                    <div class="move-item">Aguardando sua jogada...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado do jogo
        let gameState = {
            board: Array(9).fill(''),
            currentPlayer: 'player', // 'player' ou 'ai'
            gameOver: false,
            winner: null,
            difficulty: 'easy',
            stats: {
                playerWins: 0,
                playerLosses: 0,
                playerDraws: 0,
                aiWins: 0,
                aiLosses: 0,
                aiDraws: 0
            }
        };

        // Inicializa√ß√£o do jogo
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar estat√≠sticas salvas
            const savedStats = localStorage.getItem('pokemonTicTacToeStats');
            if (savedStats) {
                gameState.stats = JSON.parse(savedStats);
            }
            
            initializeGame();
            updateStatsDisplay();
        });

        function initializeGame() {
            createBoard();
            updateGameDisplay();
        }

        function createBoard() {
            const boardElement = document.getElementById('game-board');
            boardElement.innerHTML = '';
            
            for (let i = 0; i < 9; i++) {
                const cellElement = document.createElement('div');
                cellElement.className = 'board-cell';
                cellElement.dataset.index = i;
                
                cellElement.addEventListener('click', () => handleCellClick(i));
                
                boardElement.appendChild(cellElement);
            }
        }

        function handleCellClick(index) {
            if (gameState.gameOver || gameState.currentPlayer !== 'player') return;
            
            if (gameState.board[index] === '') {
                makeMove(index, 'player');
                
                if (!gameState.gameOver) {
                    setTimeout(makeAIMove, 800);
                }
            }
        }

        function makeMove(index, player) {
            gameState.board[index] = player === 'player' ? 'X' : 'O';
            
            // Atualizar visual do tabuleiro
            const cellElement = document.querySelector(`.board-cell[data-index="${index}"]`);
            cellElement.classList.add(player === 'player' ? 'cell-x' : 'cell-o');
            
            // Verificar se h√° um vencedor
            checkWinner();
            
            if (!gameState.gameOver) {
                // Alternar jogador
                gameState.currentPlayer = player === 'player' ? 'ai' : 'player';
                updateGameDisplay();
                
                // Adicionar ao hist√≥rico
                addToMoveHistory(player, index);
            }
        }

        function checkWinner() {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8], // Linhas
                [0, 3, 6], [1, 4, 7], [2, 5, 8], // Colunas
                [0, 4, 8], [2, 4, 6]             // Diagonais
            ];
            
            for (const pattern of winPatterns) {
                const [a, b, c] = pattern;
                if (gameState.board[a] && 
                    gameState.board[a] === gameState.board[b] && 
                    gameState.board[a] === gameState.board[c]) {
                    
                    gameState.gameOver = true;
                    gameState.winner = gameState.board[a] === 'X' ? 'player' : 'ai';
                    
                    // Destacar c√©lulas vencedoras
                    pattern.forEach(index => {
                        document.querySelector(`.board-cell[data-index="${index}"]`).classList.add('cell-winner');
                    });
                    
                    // Atualizar estat√≠sticas
                    if (gameState.winner === 'player') {
                        gameState.stats.playerWins++;
                        gameState.stats.aiLosses++;
                    } else {
                        gameState.stats.aiWins++;
                        gameState.stats.playerLosses++;
                    }
                    
                    updateStatsDisplay();
                    saveStats();
                    
                    document.getElementById('game-status').textContent = 
                        gameState.winner === 'player' ? 
                        'Voc√™ venceu! Parab√©ns!' : 
                        'Prof. Carvalho venceu!';
                    
                    return;
                }
            }
            
            // Verificar empate
            if (!gameState.board.includes('') && !gameState.gameOver) {
                gameState.gameOver = true;
                gameState.stats.playerDraws++;
                gameState.stats.aiDraws++;
                
                updateStatsDisplay();
                saveStats();
                
                document.getElementById('game-status').textContent = 'Empate!';
            }
        }

        function makeAIMove() {
            if (gameState.gameOver) return;
            
            let moveIndex;
            
            // Estrat√©gia baseada na dificuldade
            switch (gameState.difficulty) {
                case 'easy':
                    // Movimento aleat√≥rio
                    moveIndex = getRandomMove();
                    break;
                    
                case 'medium':
                    // 70% de chance de jogada inteligente, 30% aleat√≥ria
                    moveIndex = Math.random() < 0.7 ? getSmartMove() : getRandomMove();
                    break;
                    
                case 'hard':
                    // Sempre joga inteligente
                    moveIndex = getSmartMove();
                    break;
                    
                default:
                    moveIndex = getRandomMove();
            }
            
            if (moveIndex !== -1) {
                makeMove(moveIndex, 'ai');
            }
        }

        function getRandomMove() {
            const emptyCells = [];
            for (let i = 0; i < 9; i++) {
                if (gameState.board[i] === '') {
                    emptyCells.push(i);
                }
            }
            
            return emptyCells.length > 0 ? 
                emptyCells[Math.floor(Math.random() * emptyCells.length)] : -1;
        }

        function getSmartMove() {
            // 1. Verificar se pode vencer
            for (let i = 0; i < 9; i++) {
                if (gameState.board[i] === '') {
                    gameState.board[i] = 'O';
                    if (checkWinningMove('O')) {
                        gameState.board[i] = '';
                        return i;
                    }
                    gameState.board[i] = '';
                }
            }
            
            // 2. Bloquear jogador se ele estiver prestes a vencer
            for (let i = 0; i < 9; i++) {
                if (gameState.board[i] === '') {
                    gameState.board[i] = 'X';
                    if (checkWinningMove('X')) {
                        gameState.board[i] = '';
                        return i;
                    }
                    gameState.board[i] = '';
                }
            }
            
            // 3. Jogar no centro se dispon√≠vel
            if (gameState.board[4] === '') return 4;
            
            // 4. Jogar em um canto se dispon√≠vel
            const corners = [0, 2, 6, 8];
            const availableCorners = corners.filter(i => gameState.board[i] === '');
            if (availableCorners.length > 0) {
                return availableCorners[Math.floor(Math.random() * availableCorners.length)];
            }
            
            // 5. Jogar em uma borda se dispon√≠vel
            const edges = [1, 3, 5, 7];
            const availableEdges = edges.filter(i => gameState.board[i] === '');
            if (availableEdges.length > 0) {
                return availableEdges[Math.floor(Math.random() * availableEdges.length)];
            }
            
            return -1;
        }

        function checkWinningMove(player) {
            const winPatterns = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8],
                [0, 3, 6], [1, 4, 7], [2, 5, 8],
                [0, 4, 8], [2, 4, 6]
            ];
            
            return winPatterns.some(pattern => {
                const [a, b, c] = pattern;
                return gameState.board[a] === player && 
                       gameState.board[b] === player && 
                       gameState.board[c] === player;
            });
        }

        function addToMoveHistory(player, index) {
            const movesList = document.getElementById(player === 'player' ? 'player-moves' : 'ai-moves');
            const row = Math.floor(index / 3) + 1;
            const col = (index % 3) + 1;
            
            const moveText = `${player === 'player' ? '‚ùå' : '‚≠ï'} na posi√ß√£o (${row},${col})`;
            
            const moveItem = document.createElement('div');
            moveItem.className = 'move-item';
            moveItem.textContent = moveText;
            
            movesList.insertBefore(moveItem, movesList.firstChild);
            
            // Manter apenas os √∫ltimos 5 movimentos
            while (movesList.children.length > 5) {
                movesList.removeChild(movesList.lastChild);
            }
        }

        function updateGameDisplay() {
            if (!gameState.gameOver) {
                document.getElementById('game-status').textContent = 
                    gameState.currentPlayer === 'player' ? 
                    'Sua vez de jogar!' : 
                    'Prof. Carvalho est√° pensando...';
            }
        }

        function updateStatsDisplay() {
            document.getElementById('player-wins').textContent = gameState.stats.playerWins;
            document.getElementById('player-losses').textContent = gameState.stats.playerLosses;
            document.getElementById('player-draws').textContent = gameState.stats.playerDraws;
            
            document.getElementById('ai-wins').textContent = gameState.stats.aiWins;
            document.getElementById('ai-losses').textContent = gameState.stats.aiLosses;
            document.getElementById('ai-draws').textContent = gameState.stats.aiDraws;
        }

        function saveStats() {
            localStorage.setItem('pokemonTicTacToeStats', JSON.stringify(gameState.stats));
        }

        function setDifficulty(difficulty) {
            gameState.difficulty = difficulty;
            
            // Atualizar bot√µes de dificuldade
            document.querySelectorAll('.diff-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.diff === difficulty);
            });
            
            resetGame();
        }

        function resetGame() {
            gameState.board = Array(9).fill('');
            gameState.currentPlayer = 'player';
            gameState.gameOver = false;
            gameState.winner = null;
            
            document.getElementById('player-moves').innerHTML = '<div class="move-item">Hist√≥rico de jogadas:</div>';
            document.getElementById('ai-moves').innerHTML = '<div class="move-item">Aguardando sua jogada...</div>';
            
            initializeGame();
        }

        function goBackToDrive() {
            // Em um sistema integrado, isso redirecionaria para o PokeDrive
            alert('Voltando para o PokeDrive...');
            // window.location.href = 'pokedrive.html'; // Descomente quando integrar
        }
    </script>
</body>
</html>